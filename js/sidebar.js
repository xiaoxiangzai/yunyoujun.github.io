function activateNavByIndex(t){if(!t.classList.contains("active-current")){document.querySelectorAll(".post-toc .active").forEach(e=>{e.classList.remove("active","active-current")}),t.classList.add("active","active-current");let e=t.parentNode;for(;!e.matches(".post-toc");)e.matches("li")&&e.classList.add("active"),e=e.parentNode}}function listenSidebarTOC(){const o=document.querySelectorAll(".post-toc li");if(o.length){const r=[...o].map(e=>{const t=e.querySelector(".toc-link"),n=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return t.addEventListener("click",e=>{e.preventDefault(),window.scrollTo(0,n.offsetTop+1)}),n});!function c(i){i=Math.floor(i+1e4);let t=new IntersectionObserver((e,t)=>{var n=document.documentElement.scrollHeight+100;if(i<n)return t.disconnect(),void c(n);e=function(e){let t=0,n=e[t];if(0<n.boundingClientRect.top)return t=r.indexOf(n.target),0===t?0:t-1;for(;t<e.length;t++){if(!(e[t].boundingClientRect.top<=0))return r.indexOf(n.target);n=e[t]}return r.indexOf(n.target)}(e),activateNavByIndex(o[e])},{rootMargin:i+"px 0px -100% 0px",threshold:0});r.forEach(e=>{e&&t.observe(e)})}(document.documentElement.scrollHeight)}}function initSidebar(){const c="sidebar-nav-active",t="sidebar-panel-active";!function(){const t=document.querySelector(".sidebar-nav-toc"),n="#icon-list-ordered";t&&t.addEventListener("click",()=>{if(t.classList.contains(c)){const e=t.querySelector("use");e.setAttribute("xlink:href",e.getAttribute("xlink:href")===n?"#icon-list-unordered":n),document.querySelectorAll(".toc-number").forEach(e=>{e.classList.toggle("hidden")})}})}(),document.querySelectorAll(".sidebar-nav li").forEach(e=>{e.onclick=function(){this.classList.contains(c)||(document.querySelector("."+t).classList.remove(t),document.querySelector("#"+this.dataset.target).classList.add(t),document.querySelector("."+c).classList.remove(c),this.classList.add(c))}}),listenSidebarTOC()}document.addEventListener("DOMContentLoaded",initSidebar),document.addEventListener("pjax:success",initSidebar);